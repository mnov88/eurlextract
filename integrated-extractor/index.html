<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Integrated EurLEX Metadata Extractor</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>üá™üá∫ Integrated EurLEX Metadata Extractor</h1>
            <p class="header-subtitle">
                Extract and analyze metadata from EU legislative and case law documents with automatic case law discovery
            </p>
        </header>

        <!-- Input Section -->
        <section class="input-section">
            <div class="card">
                <div class="card__header">
                    <h2>üìù Document Input</h2>
                </div>
                <div class="card__body">
                    <div class="input-group">
                        <label for="celex-input" class="form-label">
                            CELEX Identifier
                            <span class="form-help">Enter a CELEX ID (e.g., 32016R0679, 62019CJ0311)</span>
                        </label>
                        <div class="input-with-button">
                            <input 
                                type="text" 
                                id="celex-input" 
                                class="form-control" 
                                placeholder="e.g., 32016R0679"
                                maxlength="20"
                            >
                            <button id="process-btn" class="btn btn--primary">Process Document</button>
                        </div>
                    </div>

                    <div class="settings-group">
                        <div class="setting-item">
                            <input type="checkbox" id="auto-fetch-cases" checked>
                            <label for="auto-fetch-cases">Automatically fetch referenced case law</label>
                            <span id="auto-fetch-status" class="status-enabled">Enabled</span>
                        </div>
                        <div class="setting-item">
                            <span class="form-label">Cache Status:</span>
                            <span id="cache-status">0 documents cached</span>
                            <button id="test-api-btn" class="btn btn--outline btn--sm">Test API</button>
                        </div>
                    </div>

                    <div class="manual-cases">
                        <label for="manual-cases-input" class="form-label">
                            Manual Case Law CELEX IDs 
                            <span class="form-help">Comma-separated list for additional cases</span>
                        </label>
                        <div class="input-with-button">
                            <input 
                                type="text" 
                                id="manual-cases-input" 
                                class="form-control" 
                                placeholder="e.g., 62019CJ0311, 62020CJ0156"
                            >
                            <button id="manual-cases-btn" class="btn btn--secondary">Add Cases</button>
                        </div>
                    </div>

                    <div class="button-group">
                        <button id="clear-btn" class="btn btn--outline">Clear All</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Processing Section -->
        <section id="processing-section" class="processing-section hidden">
            <div class="card">
                <div class="card__header">
                    <h2>‚öôÔ∏è Processing</h2>
                </div>
                <div class="card__body">
                    <div class="processing-spinner">
                        <div class="spinner"></div>
                        <span>Processing your request...</span>
                    </div>
                    <div id="processing-progress" class="processing-progress">
                        <!-- Progress steps will be added here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Error Section -->
        <section id="error-section" class="error-section hidden">
            <div class="card card--error">
                <div class="card__header">
                    <h2>‚ùå Error</h2>
                </div>
                <div class="card__body">
                    <p id="error-message" class="error-message"></p>
                </div>
            </div>
        </section>

        <!-- Results Section -->
        <section id="results-section" class="results-section hidden">
            <div class="card">
                <div class="card__header">
                    <h2>üìä Extraction Results</h2>
                    <div class="view-controls">
                        <button class="view-btn btn btn--tab active" data-view="legislative">Legislative</button>
                        <button class="view-btn btn btn--tab" data-view="caselaw">Case Law</button>
                        <button class="view-btn btn btn--tab" data-view="combined">Combined View</button>
                    </div>
                </div>
                <div class="card__body">
                    <!-- Export Controls -->
                    <div class="export-controls">
                        <button id="export-legislative" class="btn btn--outline btn--sm">üìÑ Export Legislative</button>
                        <button id="export-caselaw" class="btn btn--outline btn--sm">‚öñÔ∏è Export Case Law</button>
                        <button id="export-combined" class="btn btn--outline btn--sm">üîó Export Combined</button>
                    </div>

                    <!-- Legislative View -->
                    <div id="legislative-view" class="view-content">
                        <div class="view-header">
                            <h3>Legislative Document Data</h3>
                        </div>
                        <div id="legislative-content" class="content-area">
                            <!-- Legislative data will be displayed here -->
                        </div>
                    </div>

                    <!-- Case Law View -->
                    <div id="caselaw-view" class="view-content hidden">
                        <div class="view-header">
                            <h3>Case Law Documents</h3>
                        </div>
                        <div id="caselaw-content" class="content-area">
                            <!-- Case law data will be displayed here -->
                        </div>
                    </div>

                    <!-- Combined View -->
                    <div id="combined-view" class="view-content hidden">
                        <div class="view-header">
                            <h3>Integrated Analysis</h3>
                            <p class="view-description">
                                This view shows the relationships between legislative provisions and their case law interpretations.
                            </p>
                        </div>
                        <div id="combined-content" class="content-area">
                            <!-- Combined data will be displayed here -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Quick Start Guide -->
        <section class="guide-section">
            <div class="card">
                <div class="card__header">
                    <h2>üöÄ Quick Start Guide</h2>
                </div>
                <div class="card__body">
                    <div class="guide-steps">
                        <div class="guide-step">
                            <span class="step-number">1</span>
                            <div class="step-content">
                                <h4>Enter CELEX ID</h4>
                                <p>Input a CELEX identifier for any EU document (e.g., 32016R0679 for GDPR)</p>
                            </div>
                        </div>
                        <div class="guide-step">
                            <span class="step-number">2</span>
                            <div class="step-content">
                                <h4>Auto-Fetch Cases</h4>
                                <p>Enable automatic fetching of referenced case law for comprehensive analysis</p>
                            </div>
                        </div>
                        <div class="guide-step">
                            <span class="step-number">3</span>
                            <div class="step-content">
                                <h4>View Results</h4>
                                <p>Switch between Legislative, Case Law, and Combined views to explore the data</p>
                            </div>
                        </div>
                        <div class="guide-step">
                            <span class="step-number">4</span>
                            <div class="step-content">
                                <h4>Export Data</h4>
                                <p>Export your results in JSON format for further analysis or reporting</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <p>
                üîß <strong>Integrated EurLEX Extractor</strong> | 
                Combines legislative and case law metadata extraction with automatic discovery | 
                <a href="../legislation-extractor/index.html">Legislation Only</a> | 
                <a href="../case-law-extractor/index.html">Case Law Only</a>
            </p>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="../legislation-extractor/app.js"></script>
    <script src="../case-law-extractor/app.js"></script>
    <script src="api-client.js"></script>
    <script src="enhanced-article-parser.js"></script>
    <script src="app.js"></script>
</body>
</html>